.block-stacking-layout2 .layout2-sub-header {
    display: none;
}

.block-stacking-layout2 .layout2-grid-wrapper {
    padding: 8px;
    align-items: stretch !important;
    justify-content: flex-start !important;
    overflow: hidden !important;
}

.block-stacking-shell {
    width: 100%;
    height: 100%;
    position: relative;
    min-height: 0;
}

.block-order-card {
    border: none;
    border-radius: 0;
    background: transparent;
    box-shadow: none;
    position: absolute;
    left: 0;
    right: 0;
    z-index: 3;
}

.block-order-card {
    top: 0;
    height: 72px;
    padding: 0;
    display: grid;
    gap: 0;
}

.block-order-row {
    display: flex;
    align-items: stretch;
    justify-content: space-between;
    gap: 8px;
    height: 100%;
}

.block-balance-panel,
.block-next-panel {
    min-width: 0;
    height: 100%;
    border-radius: 11px;
    border: 1.5px solid rgba(168, 142, 227, 0.58);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.82), rgba(243, 233, 255, 0.86));
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 6px 8px;
    box-shadow: 0 4px 0 rgba(118, 92, 182, 0.22);
}

.block-balance-panel {
    width: 33.333%;
}

.block-next-panel {
    width: 66.666%;
}

.block-balance-dots {
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: space-evenly;
    gap: 4px;
}

.block-balance-dot {
    width: 17px;
    height: 17px;
    border-radius: 999px;
    opacity: 0.2;
    filter: saturate(0.7) brightness(0.88);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.35);
    border: 1px solid rgba(0, 0, 0, 0.18);
    transition: opacity 0.15s ease, transform 0.15s ease, box-shadow 0.15s ease, filter 0.15s ease;
}

.block-balance-dot.is-active {
    opacity: 1;
    filter: saturate(1.15) brightness(1.04);
    transform: scale(1.08);
    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.92), 0 1px 4px rgba(0, 0, 0, 0.22);
}

.block-balance-dot.is-good {
    background: linear-gradient(180deg, #5ed8a5 0%, #35b57f 100%);
}

.block-balance-dot.is-normal {
    background: linear-gradient(180deg, #ffd262 0%, #f3b53d 100%);
}

.block-balance-dot.is-risk {
    background: linear-gradient(180deg, #ff8d95 0%, #e95d68 100%);
}

.block-next-piece {
    width: max(var(--next-width-px, 0px), var(--next-width-fallback, 10%));
    margin-right: auto;
    height: 30px;
    border-radius: 8px;
    overflow: hidden;
    border: 1.5px solid rgba(145, 116, 206, 0.4);
    display: grid;
    grid-template-columns: repeat(var(--next-cols, 1), minmax(0, 1fr));
    background: rgba(255, 255, 255, 0.7);
}

.block-next-cube {
    background: var(--piece-color, #3b82f6);
    border-right: 1px solid rgba(0, 0, 0, 0.16);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.25), inset 0 -1px 0 rgba(0, 0, 0, 0.13);
}

.block-next-cube.is-hazard {
    display: grid;
    place-items: center;
    font-size: clamp(27px, 4.7vh, 39px);
    line-height: 1;
    background: transparent;
    border-right: none;
    box-shadow: none;
}

.block-next-cube:last-child {
    border-right: none;
}

.block-panel-title {
    width: 100%;
    text-align: center;
    font-size: 11px;
    line-height: 1;
    font-weight: 900;
    color: #6a48a7;
    margin-bottom: 6px;
}

.block-bundle-launcher {
    width: 100%;
    height: 69px;
    display: grid;
    grid-template-columns: 24px 1fr;
    gap: 4px;
    cursor: pointer;
    user-select: none;
    position: relative;
    z-index: 6;
}

.block-y-spacer {
    width: 24px;
    height: 100%;
}

.block-arm-lane {
    position: relative;
    width: 100%;
    height: 100%;
    display: grid;
    grid-template-columns: repeat(10, minmax(0, 1fr));
    border-radius: 10px;
    background: transparent;
    border: none;
    overflow: visible;
    z-index: 6;
}

.block-robot-rail {
    position: absolute;
    left: 0;
    right: -120px;
    top: 10px;
    height: 9px;
    background: linear-gradient(180deg, #cdb9ff 0%, #bfa4ff 100%);
    border-radius: 5px;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5), inset 0 -1px 0 rgba(109, 82, 179, 0.28);
    z-index: 1;
}

.block-robot-arm {
    position: absolute;
    left: 50%;
    top: 1px;
    transform: translateX(-50%);
    display: grid;
    justify-items: center;
    pointer-events: none;
    z-index: 4;
}

.block-carriage {
    position: absolute;
    left: calc(var(--arm-col) * 10%);
    top: 0;
    width: calc(var(--bundle-cols) * 10%);
    height: 100%;
    pointer-events: none;
    z-index: 7;
}

.block-source-bundle-flat {
    position: absolute;
    top: 23px;
    left: 0;
    right: 0;
    height: var(--grid-cell-h, 36px);
    z-index: 12;
    border: none;
    background: transparent;
    box-shadow: none;
    display: grid;
    grid-template-columns: repeat(var(--bundle-cols), minmax(0, 1fr));
    gap: 0;
    align-items: center;
}

.block-source-piece {
    border-radius: 0;
    overflow: visible;
    pointer-events: none;
    z-index: 12;
}

.block-source-piece .block-source-cube {
    background: var(--piece-color, #3b82f6);
    border-right: 1px solid rgba(0, 0, 0, 0.18);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.22), inset 0 -1px 0 rgba(0, 0, 0, 0.14);
    font-size: 0;
    line-height: 0;
}

.block-source-piece .block-source-cube:first-child {
    border-top-left-radius: 4px;
    border-bottom-left-radius: 4px;
}

.block-source-piece .block-source-cube:last-child {
    border-top-right-radius: 4px;
    border-bottom-right-radius: 4px;
}

.block-source-piece .block-source-cube.is-hazard {
    font-size: clamp(30px, 5vh, 45px);
    line-height: 1;
    background: transparent;
    border-right: none;
    box-shadow: none;
    position: relative;
    z-index: 13;
}

.block-robot-head {
    width: 14px;
    height: 14px;
    border-radius: 999px;
    background: radial-gradient(circle at 30% 30%, #e7deff 0%, #c3adff 58%, #ab8fe9 100%);
    box-shadow: 0 1px 0 rgba(104, 76, 173, 0.35);
}

.block-robot-line {
    width: 8px;
    height: 16px;
    border-radius: 1px;
    background: linear-gradient(180deg, #d9ccff 0%, #bca4ff 100%);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.45), inset 0 -1px 0 rgba(112, 84, 178, 0.24);
}

.block-grid-panel {
    position: absolute;
    top: 80px;
    bottom: 0;
    left: 0;
    right: 0;
    min-height: 0;
    z-index: 1;
    display: grid;
    grid-template-rows: 69px 1fr;
    gap: 6px;
}

.block-click-drop-hint {
    position: absolute;
    left: 1rem;
    right: 1rem;
    bottom: clamp(0.6rem, 2dvh, 1.15rem);
    z-index: 25;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 2.5rem;
    border-radius: 0.8rem;
    background: rgba(255, 255, 255, 0.94);
    color: #1e3a8a;
    font-size: 1.02rem;
    font-weight: 800;
    letter-spacing: 0.01em;
    box-shadow: 0 4px 12px rgba(15, 23, 42, 0.18);
    animation: block-hint-fade-in 0.2s ease-out forwards;
}

.block-click-drop-hint.is-exiting {
    animation: block-hint-fade-out 0.22s ease-in forwards;
}

@keyframes block-hint-fade-in {
    from {
        opacity: 0;
        transform: translateY(6px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes block-hint-fade-out {
    from {
        opacity: 1;
        transform: translateY(0);
    }

    to {
        opacity: 0;
        transform: translateY(4px);
    }
}

.block-grid-frame {
    width: 100%;
    height: 100%;
    border-radius: 0;
    border: none;
    background: transparent;
    padding: 0;
    display: grid;
    grid-template-columns: 24px 1fr;
    gap: 4px;
    position: relative;
    z-index: 2;
}

.block-y-axis {
    display: grid;
    grid-template-rows: repeat(10, 1fr);
    font-size: 12px;
    font-weight: 800;
    color: #2d628d;
}

.block-y-axis span {
    display: flex;
    align-items: center;
    justify-content: center;
}

.block-grid-board {
    position: relative;
    border-radius: 10px;
    border: 2px solid rgba(150, 122, 214, 0.42);
    background: linear-gradient(180deg, rgba(243, 238, 255, 0.82), rgba(230, 220, 255, 0.78));
    display: grid;
    grid-template-columns: repeat(10, 1fr);
    grid-template-rows: repeat(10, 1fr);
    gap: 0;
    padding: 0;
    overflow: hidden;
    touch-action: none;
}

.block-center-hint-column {
    position: absolute;
    top: 1px;
    bottom: 1px;
    left: calc((var(--center-col) * 10%) + 1px);
    width: calc(10% - 1px);
    background: linear-gradient(
        180deg,
        rgba(255, 193, 122, 0.08) 0%,
        rgba(255, 193, 122, 0.24) 35%,
        rgba(255, 193, 122, 0.28) 60%,
        rgba(255, 193, 122, 0.12) 100%
    );
    pointer-events: none;
    z-index: 1;
    animation: block-center-hint-pulse 1.7s ease-in-out infinite;
}

@keyframes block-center-hint-pulse {
    0% {
        opacity: 0.28;
    }
    50% {
        opacity: 0.56;
    }
    100% {
        opacity: 0.28;
    }
}

.block-cell {
    box-sizing: border-box;
    border-right: none;
    border-bottom: none;
    background: transparent;
    min-width: 0;
    min-height: 0;
}

.block-cell:nth-child(-n + 10) {
    border-top: none;
}

.block-cell:nth-child(10n + 1) {
    border-left: none;
}

.block-cell.filled {
    background: linear-gradient(180deg, #a9e1ff, #76c6f2);
    border: 1px solid rgba(65, 125, 168, 0.55);
    position: relative;
    z-index: 2;
}

.block-cell.ghost {
    background: transparent;
    border: none;
}

.block-falling-piece {
    position: absolute;
    top: calc((var(--piece-row) * 10%) + 1px);
    left: calc((var(--piece-col) * 10%) + 1px);
    width: calc(var(--piece-size) * 10% - 1px);
    height: calc(10% - 1px);
    display: grid;
    grid-template-columns: repeat(var(--piece-size), minmax(0, 1fr));
    gap: 0;
    border-radius: 4px;
    background: linear-gradient(180deg, rgba(169, 225, 255, 0.95), rgba(118, 198, 242, 0.95));
    border: 1px solid rgba(65, 125, 168, 0.75);
    pointer-events: none;
    z-index: 3;
}

.block-settled-piece {
    position: absolute;
    top: calc((var(--piece-row) * 10%) + 1px);
    left: calc((var(--piece-col) * 10%) + 1px);
    width: calc(var(--piece-size) * 10% - 1px);
    height: calc(10% - 1px);
    display: grid;
    grid-template-columns: repeat(var(--piece-size), minmax(0, 1fr));
    gap: 0;
    border-radius: 4px;
    background: linear-gradient(180deg, rgba(169, 225, 255, 0.95), rgba(118, 198, 242, 0.95));
    border: 1px solid rgba(65, 125, 168, 0.75);
    pointer-events: none;
    z-index: 2;
}

.block-settled-piece.collapsing {
    animation: block-stack-collapse 460ms ease-in forwards;
    animation-delay: calc(var(--collapse-index, 0) * 32ms);
    transform-origin: center bottom;
}

@keyframes block-stack-collapse {
    0% {
        transform: translate(0, 0) rotate(0deg);
        opacity: 1;
    }
    35% {
        transform: translate(6px, 3px) rotate(5deg);
    }
    100% {
        transform: translate(26px, 48px) rotate(16deg);
        opacity: 0;
    }
}

.block-source-piece .block-cube,
.block-falling-piece .block-cube,
.block-settled-piece .block-cube {
    width: 100%;
    height: 100%;
    display: grid;
    place-items: center;
    box-sizing: border-box;
    border-right: 1px solid rgba(65, 125, 168, 0.45);
    font-size: clamp(18px, 3.9vh, 42px);
    line-height: 0.95;
}

.block-source-piece .block-cube:first-child,
.block-falling-piece .block-cube:first-child,
.block-settled-piece .block-cube:first-child {
    border-left: none;
}

.block-source-piece .block-cube:last-child,
.block-falling-piece .block-cube:last-child,
.block-settled-piece .block-cube:last-child {
    border-right: none;
}

.block-falling-piece .block-cube {
    opacity: 0.98;
}

.block-falling-piece,
.block-settled-piece {
    background: var(--piece-color, linear-gradient(180deg, rgba(169, 225, 255, 0.95), rgba(118, 198, 242, 0.95)));
}

@media (max-width: 420px) {
    .block-order-card {
        height: 68px;
    }

    .block-grid-panel {
        top: 74px;
        bottom: 0;
    }

    .block-robot-line {
        height: 16px;
    }
}
